name: KYPO Test Workflow

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:

  test-kypo:
    uses: ./.github/workflows/terraform.yml  # Call the reusable workflow
    with:
      action: 'terraform-build'

  test-kypo-cleanup:
    needs: test-kypo
    # if: cancelled()
    uses: ./.github/workflows/terraform.yml  # Call the reusable workflow
    with:
      action: 'terraform-destroy'
    # runs-on: ubuntu-latest
    # steps:
    #   - name: Checkout repository
    #     uses: actions/checkout@v4
      
    #   - name: Run Terraform destroy
    #     run: |
    #       terraform destroy -auto-approve
